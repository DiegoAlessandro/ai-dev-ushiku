<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">

    <!-- Google Analytics (GA4) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-8P2TZ0MQWB"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-8P2TZ0MQWB');
    </script>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>建設日報AI清書デモ | AI活用相談 牛久</title>
    <meta name="description" content="現場メモをAIが自動で清書。建設業向けAI日報作成デモをお試しください。">
    <link rel="canonical" href="https://ushiku-ai.jp/demo/report.html">

    <!-- OGP -->
    <meta property="og:title" content="建設日報AI清書デモ | AI活用相談 牛久">
    <meta property="og:description" content="現場メモをAIが自動で清書。建設業向けAI日報作成デモをお試しください。">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://ushiku-ai.jp/demo/report.html">
    <meta property="og:site_name" content="AI活用相談 牛久">
    <meta property="og:locale" content="ja_JP">
    <meta property="og:image" content="https://ushiku-ai.jp/ogp.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="建設日報AI清書デモ | AI活用相談 牛久">
    <meta name="twitter:description" content="現場メモをAIが自動で清書。建設業向けAI日報作成デモをお試しください。">
    <meta name="twitter:image" content="https://ushiku-ai.jp/ogp.png">

    <!-- JSON-LD -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "建設日報AI清書デモ",
        "description": "現場メモをAIがプロ品質の業務報告書に自動変換するデモツール",
        "url": "https://ushiku-ai.jp/demo/report.html",
        "applicationCategory": "BusinessApplication",
        "operatingSystem": "Web",
        "offers": { "@type": "Offer", "price": "0", "priceCurrency": "JPY" },
        "provider": {
            "@type": "ProfessionalService",
            "name": "AI活用相談 牛久",
            "url": "https://ushiku-ai.jp/"
        }
    }
    </script>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            { "@type": "ListItem", "position": 1, "name": "AI活用相談 牛久", "item": "https://ushiku-ai.jp/" },
            { "@type": "ListItem", "position": 2, "name": "建設日報AI清書デモ", "item": "https://ushiku-ai.jp/demo/report.html" }
        ]
    }
    </script>

    <!-- Favicon -->
    <link rel="icon" href="/favicon.ico" sizes="32x32">
    <link rel="icon" href="/favicon-512.png" sizes="512x512" type="image/png">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">

    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet"></noscript>
    <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" media="print" onload="this.media='all'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"></noscript>

    <style>
        /* ========================================
           CSS Custom Properties
           ======================================== */
        :root {
            --primary: #2563A0;
            --primary-light: #3B82C4;
            --primary-pale: #EBF4FA;
            --accent: #E8793A;
            --accent-light: #FFF3EB;
            --bg: #FAFAF8;
            --bg-white: #FFFFFF;
            --text: #1F2937;
            --text-sub: #6B7280;
            --border: #E5E7EB;
            --success: #16A34A;
            --danger: #DC2626;
        }

        /* ========================================
           Reset & Base
           ======================================== */
        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            font-weight: 400;
            color: var(--text);
            background-color: var(--bg);
            line-height: 1.8;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* ========================================
           Accessibility: prefers-reduced-motion
           ======================================== */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }

            .spinner {
                animation: none !important;
            }
        }

        /* ========================================
           Header
           ======================================== */
        .header {
            background-color: var(--bg-white);
            border-bottom: 1px solid var(--border);
            padding: 16px 24px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);
        }

        .header-inner {
            max-width: 1100px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header-logo {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .header-logo i {
            font-size: 1.1rem;
        }

        .header-back {
            font-size: 0.9rem;
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            border-radius: 6px;
            transition: background-color 0.2s ease;
        }

        .header-back:hover {
            background-color: var(--primary-pale);
        }

        /* ========================================
           Main Content
           ======================================== */
        .main {
            flex: 1;
            max-width: 1100px;
            width: 100%;
            margin: 0 auto;
            padding: 40px 24px;
        }

        .page-title {
            text-align: center;
            margin-bottom: 12px;
        }

        .page-title h1 {
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--text);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .page-title h1 i {
            color: var(--accent);
        }

        .page-subtitle {
            text-align: center;
            color: var(--text-sub);
            font-size: 0.95rem;
            margin-bottom: 36px;
        }

        /* ========================================
           Two-Column Layout
           ======================================== */
        .columns {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
            align-items: start;
        }

        .column-card {
            background-color: var(--bg-white);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }

        .column-label {
            font-size: 0.95rem;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .column-label i {
            color: var(--primary);
            font-size: 0.9rem;
        }

        .column-label .label-badge {
            font-size: 0.75rem;
            font-weight: 500;
            background-color: var(--primary-pale);
            color: var(--primary);
            padding: 2px 8px;
            border-radius: 4px;
            margin-left: auto;
        }

        /* ========================================
           Textarea (Input)
           ======================================== */
        .input-textarea {
            width: 100%;
            min-height: 240px;
            padding: 16px;
            font-family: 'Noto Sans JP', sans-serif;
            font-size: 0.95rem;
            line-height: 1.8;
            color: var(--text);
            background-color: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            resize: vertical;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }

        .input-textarea:focus {
            outline: none;
            border-color: var(--primary-light);
            box-shadow: 0 0 0 3px rgba(37, 99, 160, 0.12);
        }

        .char-counter {
            text-align: right;
            font-size: 0.8rem;
            color: var(--text-sub);
            margin-top: 8px;
        }

        .char-counter.over-limit {
            color: var(--danger);
            font-weight: 500;
        }

        /* ========================================
           Submit Button
           ======================================== */
        .button-area {
            display: flex;
            justify-content: center;
            margin: 28px 0;
        }

        .submit-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 14px 36px;
            font-family: 'Noto Sans JP', sans-serif;
            font-size: 1.05rem;
            font-weight: 700;
            color: var(--bg-white);
            background-color: var(--accent);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.1s ease, box-shadow 0.2s ease;
            box-shadow: 0 2px 8px rgba(232, 121, 58, 0.3);
        }

        .submit-btn:hover:not(:disabled) {
            background-color: #d56a2e;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(232, 121, 58, 0.4);
        }

        .submit-btn:active:not(:disabled) {
            transform: translateY(0);
        }

        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* ========================================
           Result Area
           ======================================== */
        .result-area {
            min-height: 240px;
            padding: 16px;
            background-color: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            white-space: pre-wrap;
            word-wrap: break-word;
            font-size: 0.95rem;
            line-height: 1.8;
            color: var(--text);
        }

        .result-placeholder {
            color: var(--text-sub);
            font-style: normal;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 200px;
            gap: 12px;
            text-align: center;
        }

        .result-placeholder i {
            font-size: 2rem;
            color: var(--border);
        }

        .result-placeholder p {
            font-size: 0.9rem;
        }

        /* ========================================
           Loading Spinner
           ======================================== */
        .loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 200px;
            gap: 16px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 0.9rem;
            color: var(--text-sub);
            font-weight: 500;
        }

        /* ========================================
           Toast Notification
           ======================================== */
        .toast {
            position: fixed;
            bottom: 32px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background-color: var(--danger);
            color: var(--bg-white);
            padding: 14px 24px;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            max-width: 90%;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        .toast i {
            font-size: 1.1rem;
        }

        /* ========================================
           Footer
           ======================================== */
        .footer {
            background-color: var(--bg-white);
            border-top: 1px solid var(--border);
            padding: 20px 24px;
            text-align: center;
        }

        .footer-powered {
            font-size: 0.85rem;
            color: var(--text-sub);
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .footer-powered i {
            color: var(--primary);
        }

        .footer-copyright {
            font-size: 0.8rem;
            color: var(--text-sub);
        }

        /* ========================================
           Responsive (Mobile)
           ======================================== */
        @media (max-width: 768px) {
            .columns {
                grid-template-columns: 1fr;
                gap: 0;
            }

            .main {
                padding: 24px 16px;
            }

            .page-title h1 {
                font-size: 1.3rem;
            }

            .page-subtitle {
                margin-bottom: 24px;
                font-size: 0.88rem;
            }

            .column-card {
                border-radius: 12px;
            }

            .column-card:first-child {
                border-bottom-left-radius: 0;
                border-bottom-right-radius: 0;
                border-bottom: none;
            }

            .column-card:last-child {
                border-top-left-radius: 0;
                border-top-right-radius: 0;
            }

            .button-area {
                margin: 20px 0;
            }

            .submit-btn {
                width: 100%;
                justify-content: center;
                padding: 14px 24px;
            }

            .input-textarea {
                min-height: 200px;
            }

            .result-area {
                min-height: 200px;
            }

            .header {
                padding: 12px 16px;
            }

            .header-logo {
                font-size: 1.05rem;
            }

            .header-back {
                font-size: 0.85rem;
                padding: 6px 12px;
            }
        }

        @media (max-width: 480px) {
            .page-title h1 {
                font-size: 1.15rem;
            }

            .submit-btn {
                font-size: 0.95rem;
            }
        }
    </style>
</head>
<body>
    <!-- ========================================
         Header
         ======================================== -->
    <header class="header">
        <div class="header-inner">
            <a href="/" class="header-logo" aria-label="AI活用相談 牛久 トップページ">
                <i class="fa-solid fa-robot"></i>
                AI活用相談 牛久
            </a>
            <a href="/" class="header-back">
                <i class="fa-solid fa-arrow-left"></i>
                LPに戻る
            </a>
        </div>
    </header>

    <!-- ========================================
         Main Content
         ======================================== -->
    <main class="main">
        <div class="page-title">
            <h1>
                <i class="fa-solid fa-hard-hat"></i>
                建設日報AI清書デモ
            </h1>
        </div>
        <p class="page-subtitle">現場メモをAIがきれいな日報に自動清書します。下の例文を編集してお試しください。</p>

        <div class="columns">
            <!-- Left Column: Input -->
            <div class="column-card">
                <label class="column-label" for="rough-notes">
                    <i class="fa-solid fa-pencil"></i>
                    現場メモ（ラフ入力）
                    <span class="label-badge">入力</span>
                </label>
                <textarea
                    id="rough-notes"
                    class="input-textarea"
                    maxlength="500"
                    placeholder="現場メモを入力してください..."
                >8/15 晴れ ○○様邸 基礎工事
コンクリ打設午前中完了 ポンプ車9時着
午後から型枠ばらし 明日配筋検査
作業員2名 残業なし
安全帯チェック全員OK</textarea>
                <div class="char-counter" id="char-counter" aria-live="polite">
                    <span id="char-count">0</span> / 500
                </div>
            </div>

            <!-- Right Column: Result -->
            <div class="column-card">
                <div class="column-label">
                    <i class="fa-solid fa-file-lines"></i>
                    清書された日報
                    <span class="label-badge">出力</span>
                </div>
                <div class="result-area" id="result-area" aria-live="polite">
                    <div class="result-placeholder" id="result-placeholder">
                        <i class="fa-solid fa-clipboard-list"></i>
                        <p>「清書する」ボタンを押すと<br>ここにAI清書結果が表示されます</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Submit Button -->
        <div class="button-area">
            <button type="button" class="submit-btn" id="submit-btn">
                <i class="fa-solid fa-wand-magic-sparkles"></i>
                清書する
                <i class="fa-solid fa-arrow-right"></i>
            </button>
        </div>
    </main>

    <!-- ========================================
         Footer
         ======================================== -->
    <footer class="footer">
        <div class="footer-powered">
            <i class="fa-solid fa-sparkles"></i>
            Powered by Gemini
        </div>
        <div class="footer-copyright">&copy; 2026 AI活用相談 牛久</div>
    </footer>

    <!-- Toast Notification -->
    <div class="toast" id="toast" role="alert" aria-live="assertive">
        <i class="fa-solid fa-circle-exclamation"></i>
        <span id="toast-message"></span>
    </div>

    <!-- ========================================
         JavaScript
         ======================================== -->
    <script>
        (function () {
            'use strict';

            /** @type {HTMLTextAreaElement} */
            var textareaEl = document.getElementById('rough-notes');
            /** @type {HTMLButtonElement} */
            var submitBtnEl = document.getElementById('submit-btn');
            /** @type {HTMLElement} */
            var resultAreaEl = document.getElementById('result-area');
            /** @type {HTMLElement} */
            var placeholderEl = document.getElementById('result-placeholder');
            /** @type {HTMLElement} */
            var charCountEl = document.getElementById('char-count');
            /** @type {HTMLElement} */
            var charCounterEl = document.getElementById('char-counter');
            /** @type {HTMLElement} */
            var toastEl = document.getElementById('toast');
            /** @type {HTMLElement} */
            var toastMessageEl = document.getElementById('toast-message');

            var MAX_CHARS = 500;
            var THROTTLE_MS = 3000;
            var API_ENDPOINT = '/api/report';
            var toastTimer = null;
            var isThrottled = false;

            // ---- Character Counter ----
            function updateCharCount() {
                var len = textareaEl.value.length;
                charCountEl.textContent = String(len);
                if (len > MAX_CHARS) {
                    charCounterEl.classList.add('over-limit');
                } else {
                    charCounterEl.classList.remove('over-limit');
                }
            }

            textareaEl.addEventListener('input', updateCharCount);
            updateCharCount();

            // GA4: demo_start
            gtag('event', 'demo_start', { demo_type: 'report' });

            // ---- Toast ----
            function showToast(message) {
                if (toastTimer) {
                    clearTimeout(toastTimer);
                }
                toastMessageEl.textContent = message;
                toastEl.classList.add('show');
                toastTimer = setTimeout(function () {
                    toastEl.classList.remove('show');
                    toastTimer = null;
                }, 4000);
            }

            // ---- Loading State ----
            function showLoading() {
                resultAreaEl.innerHTML =
                    '<div class="loading">' +
                    '  <div class="spinner"></div>' +
                    '  <div class="loading-text">AIが清書しています...</div>' +
                    '</div>';
            }

            function showResult(text) {
                resultAreaEl.innerHTML = '';
                resultAreaEl.textContent = text;
                resultAreaEl.style.whiteSpace = 'pre-wrap';
            }

            function showPlaceholder() {
                resultAreaEl.innerHTML =
                    '<div class="result-placeholder">' +
                    '  <i class="fa-solid fa-clipboard-list"></i>' +
                    '  <p>「清書する」ボタンを押すと<br>ここにAI清書結果が表示されます</p>' +
                    '</div>';
            }

            // ---- Throttle ----
            function startThrottle() {
                isThrottled = true;
                submitBtnEl.disabled = true;
                setTimeout(function () {
                    isThrottled = false;
                    submitBtnEl.disabled = false;
                }, THROTTLE_MS);
            }

            // ---- Submit Handler ----
            submitBtnEl.addEventListener('click', function () {
                if (isThrottled) return;

                var roughNotes = textareaEl.value.trim();

                if (!roughNotes) {
                    showToast('現場メモを入力してください。');
                    return;
                }

                if (roughNotes.length > MAX_CHARS) {
                    showToast('入力は' + MAX_CHARS + '文字以内にしてください。');
                    return;
                }

                startThrottle();
                showLoading();

                // GA4: demo_submit
                gtag('event', 'demo_submit', { demo_type: 'report' });

                fetch(API_ENDPOINT, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ roughNotes: roughNotes })
                })
                .then(function (response) {
                    if (!response.ok) {
                        throw new Error('サーバーエラーが発生しました（' + response.status + '）');
                    }
                    return response.json();
                })
                .then(function (data) {
                    if (data && data.cleanReport) {
                        showResult(data.cleanReport);
                        gtag('event', 'demo_result', { demo_type: 'report', success: true });
                    } else {
                        throw new Error('レスポンス形式が不正です。');
                    }
                })
                .catch(function (err) {
                    gtag('event', 'demo_result', { demo_type: 'report', success: false });
                    showPlaceholder();
                    showToast(err.message || '通信エラーが発生しました。しばらくしてからお試しください。');
                });
            });
        })();
    </script>
</body>
</html>
